<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>获取EditText控件的值getText().toString()为空。报错空指针</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Byronlee</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>获取EditText控件的值getText().toString()为空。报错空指针</h2>
<p class="meta">29 Jul 2012</p>

<div class="post">
<p>今天遇到一个很蛋疼的问题，</p>

<blockquote><p>public void onCreate(Bundle savedInstanceState) {<br />
super.onCreate(savedInstanceState);<br />
<span style="color: #ff0000;">name=(EditText)findViewById(R.id.username);</span><br />
<span style="color: #ff0000;"> pass=(EditText)findViewById(R.id.password);</span><br />
<span style="color: #ff0000;"> setContentView(R.layout.main);</span><br />
buttonlogo=(Button) findViewById(R.id.login);<br />
buttonlogo.setOnClickListener(this);</p>
<p>}</p>
<p>public void onClick(View v) {<br />
// TODO Auto-generated method stub<br />
if(v.getId()==R.id.login){</p>
<p>Log.v(TAG, "执行到此处");<br />
<span style="color: #ff0000;">username=name.getText().toString().trim(); //报错</span><br />
userpass=pass.getText().toString().trim();<br />
if(username.equals("")||userpass.equals("")){<br />
Toast.makeText(WowoyuanActivity.this, "用户名或密码不能为空！", Toast.LENGTH_SHORT).show();<br />
}else{<br />
loginwowoyuan(username,userpass);<br />
//Toast.makeText(WowoyuanActivity.this, "登录成功！", Toast.LENGTH_SHORT).show();<br />
}<br />
}</p></blockquote>

<p>运行后 总是报错说是空指针， 并把错误指向<span style="color: #ff0000;">：username=name.getText().toString().trim();</span> 这句代码，于是就很纳闷了，这个很简单的逻辑 怎么出错了？ 最后自己醒悟，唉，原来是<span style="color: #ff0000;"> setContentView(R.layout.main);</span> 放错位置了。 一定要在布局代码以后去操作这些控件。所以 只需要 做以下改正就ok</p>

<blockquote><p>public void onCreate(Bundle savedInstanceState) {<br />
super.onCreate(savedInstanceState);</p>
<p><span style="color: #ff0000;">setContentView(R.layout.main);</span><br />
<span style="color: #ff0000;"> name=(EditText)findViewById(R.id.username);</span><br />
<span style="color: #ff0000;"> pass=(EditText)findViewById(R.id.password);</span></p>
<p>buttonlogo=(Button) findViewById(R.id.login);<br />
buttonlogo.setOnClickListener(this);</p>
<p>}</p></blockquote>

<p>问题得以解决！！ 很是蛋疼的低级错误。</p>

</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
